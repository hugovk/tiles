<!doctype html>
<html lang="en">
<head>
  <style>
    body { margin-top:15px; }
    h1 { text-align: center; }
    h1,h2,h3 { line-height:1.2; }
    canvas, body {
      background-color: #EEEEEE;
      color: #444;
      font-size: 24px;
      line-height: 1.6;
      margin:40px auto;
      max-width: 650px;
      padding: 0 10px;
    }
    a {
      color: #0084ff;
      text-decoration: none;
    }
    a:hover,
    a:hover div {
      /*color: #007b00;*/
      color: white;
      background-color: #0084ff;
      outline: 0.05em solid #0084ff;
    }
    button, input {
      font-family: Times, serif;
    }
    fieldset div {
      text-align: center;
    }
    form p {
      float: left;
      clear: both;
      padding: 5px;
    }
    input {
      width: 140px;
    }
    legend {
      font-size: 20px;
    }
    #find-me, #latitude {
      font-size: 24px;
    }
    #latitude {
      text-align: center;
    }
  </style>
  <meta charset="utf-8">
  <link rel="icon" href="favicon.ico">
  <title>How big is an explorer tile?</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta property="og:title" content="Drop Python">
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://hugovk.github.io/tiles/">
  <meta property="og:description" content="How big is a cycling explorer tile at your latitude?">
</head>
<body>

<h1>How big is an explorer tile?</h1>

<form id="frm1">
  <fieldset>
    <legend>Latitude</legend>
    <div>
      <input type="number" id="latitude" min="-90" max="90" step="0.1" value="60.2">
    </div>
  </fieldset>
  <fieldset>
    <legend>Size</legend>
    <div><span id="km">x</span> km</div>
    <div><span id="miles">x</span> miles</div>
  </fieldset>
</form>

<p><button id="find-me">Get location</button> <span id="status"></span></p>

<p>Each tile is a standard OpenStreetMap tile at level 14 zoom, and the size depends on your latitude.</p>

<p>Thanks and more info:</p>
<ul>
  <li><a href="https://rideeverytile.com/tiles/how_big_is_a_tile">https://rideeverytile.com/tiles/how_big_is_a_tile</a>
  </li>
  <li><a href="https://statshunters.com/heatmap/tiles">StatsHunters</a></li>
</ul>


<a href="https://hugovk.github.io/tiles/" class="github-corner" aria-label="View source on GitHub"><svg width="80" height="80" viewBox="0 0 250 250" style="fill:#0084ff; color:#fff; position: absolute; top: 0; border: 0; right: 0;" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a><style>.github-corner:hover .octo-arm{animation:octocat-wave 560ms ease-in-out}@keyframes octocat-wave{0%,100%{transform:rotate(0)}20%,60%{transform:rotate(-25deg)}40%,80%{transform:rotate(10deg)}}@media (max-width:500px){.github-corner:hover .octo-arm{animation:none}.github-corner .octo-arm{animation:octocat-wave 560ms ease-in-out}}</style>

<script src="jquery-3.5.1.min.js"></script>
<script>

  const CIRCUMFERENCE_OF_THE_EARTH = 40075 // km
  const TILES = 2**14
  const KM_TO_MILES = 0.62137

  function toRadians(angle) {
    return angle * (Math.PI / 180)
  }

  function tileIt() {
    let latitude = document.getElementById('latitude').value
    if (latitude.length) {
      // Size = Circumference of Earth * cos(latitude) / 2^14
      let km = CIRCUMFERENCE_OF_THE_EARTH * Math.cos(toRadians(latitude)) / TILES
      let miles = (km * KM_TO_MILES).toFixed(2)
      km = km.toFixed(2)
      console.log(km)
      console.log(miles)
      document.getElementById('km').innerHTML = km
      document.getElementById('miles').innerHTML = miles
    }
  }

    function geoFindMe() {
      const status = document.querySelector('#status')
      const latitude = document.querySelector('#latitude')

      function success(position) {
        status.textContent = ''
        latitude.value = position.coords.latitude
        tileIt()
      }

      function error() {
        status.textContent = 'Unable to retrieve your location'
      }

      if(!navigator.geolocation) {
        status.textContent = 'Geolocation is not supported by your browser'
      } else {
        status.textContent = 'Locatingâ€¦'
        navigator.geolocation.getCurrentPosition(success, error)
      }

    }

    $(document).ready(function() {
    tileIt()

    $(":input").bind('keyup mouseup', function () {
      tileIt()
    })

    document.querySelector('#find-me').addEventListener('click', geoFindMe)
  })
</script>

</body>
</html>
